# Event Management System

Система управления мероприятиями, помещениями и участниками. Позволяет создавать мероприятия, регистрировать участников, управлять помещениями и отправлять email-уведомления участникам о предстоящих мероприятиях.

## Функциональность

### Помещения
- Регистрация помещений с указанием названия и вместимости
- Просмотр доступных помещений на определенное время
- Редактирование информации о помещении
- Удаление помещений (если нет активных мероприятий)

### Мероприятия
- Регистрация мероприятий с указанием названия, времени и помещения
- Просмотр мероприятий за период
- Редактирование информации о мероприятии
- Удаление мероприятий

### Участники
- Регистрация участников на мероприятия
- Просмотр информации об участнике
- Редактирование данных участника
- Удаление участников (если нет активных мероприятий)

## Система уведомлений

В приложении реализована система email-уведомлений для участников мероприятий:
* Автоматическая отправка напоминаний о предстоящих мероприятиях
* Уведомления отправляются за день до начала мероприятия
* Рассылка выполняется автоматически каждый день в 8:00

### Настройка email

Для работы системы уведомлений необходимо настроить параметры SMTP в файле application.properties:

```
properties
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
```


Примечание: Для использования Gmail необходимо создать специальный пароль приложения в настройках безопасности Google аккаунта.

## Технологии
- Java 17
- Spring Boot
- Spring Data JPA
- PostgreSQL
- Maven
- Lombok
- Swagger
- Flyway

## API Endpoints

### Помещения
* POST /api/rooms - Регистрация помещения
* GET /api/rooms/available - Получение списка доступных помещений
* GET /api/rooms/{id} - Получение информации о помещении
* PUT /api/rooms/{id} - Обновление информации о помещении
* DELETE /api/rooms/{id} - Удаление помещения

### Мероприятия
* POST /api/events - Регистрация мероприятия
* GET /api/events/between - Получение списка мероприятий за период
* GET /api/events/{id} - Получение информации о мероприятии
* PUT /api/events/{id} - Обновление информации о мероприятии
* DELETE /api/events/{id} - Удаление мероприятия
* POST /api/events/{id}/register - Регистрация участника на мероприятие
* GET /api/events/{Id}/participants - Получить список всех участников мероприятия

### Участники
* GET /api/participants/{id} - Получение информации об участнике
* PUT /api/participants/{id} - Обновление информации об участнике
* DELETE /api/participants/{id} - Удаление участника

## Примеры запросов

### Регистрация помещения
```
http
POST /api/rooms
Content-Type: application/json
{
"name": "Конференц-зал А",
"capacity": 50
}
```


### Регистрация мероприятия

```
http
POST /api/events
Content-Type: application/json
{ 
"name": "Конференция по Spring", 
"startTime": "2024-04-20T10:00:00", 
"endTime": "2024-04-20T12:00:00", 
"roomId": 1 
}
```


### Регистрация участника
```
http
POST /api/events/1/register
Content-Type: application/json
{
"firstName": "Иван",
"lastName": "Петров",
"email": "ivan@example.com",
"phone": "+7(978)111-22-33"
}
```

## Документация API (Swagger)

После запуска приложения документация API доступна по адресу:
* http://localhost:8080/swagger

Swagger UI предоставляет:
- Интерактивную документацию API
- Возможность тестирования endpoints
- Описание всех доступных методов
- Примеры запросов и ответов
- Схемы данных (DTO)

Для тестирования API через Swagger UI:
1. Перейдите по адресу http://localhost:8080/swagger
2. Выберите нужный endpoint
3. Нажмите "Try it out"
4. Заполните параметры запроса
5. Нажмите "Execute"

Примечание: Для параметров даты и времени используйте формат ISO 8601 (например, 2024-04-20T10:00:00)

## Бизнес-правила

1. Помещения:
   - Нельзя удалить помещение с активными мероприятиями
   - Нельзя уменьшить вместимость помещения при наличии активных мероприятий
   - Помещение не может быть забронировано на пересекающиеся промежутки времени

2. Мероприятия:
   - Время начала не может быть позже времени окончания
   - При создании мероприятия дата должна быть в будущем
   - Нельзя создать мероприятие в уже забронированном помещении

3. Участники:
   - Email должен быть уникальным
   - Нельзя удалить участника с активными мероприятиями
   - Формат телефона: +7(XXX)XXX-XX-XX